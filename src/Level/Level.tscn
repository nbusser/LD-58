[gd_scene load_steps=14 format=3 uid="uid://fkx747pj67wj"]

[ext_resource type="Script" uid="uid://drh117nvpnukt" path="res://src/Level/Level.gd" id="1"]
[ext_resource type="PackedScene" uid="uid://btohiqrak4tcf" path="res://src/Map/Map.tscn" id="2"]
[ext_resource type="Texture2D" uid="uid://c842h3l0862cb" path="res://assets/sprites/sky_0.png" id="2_clcnw"]
[ext_resource type="Texture2D" uid="uid://bgljkyym7601t" path="res://assets/sprites/mountain_0.png" id="3_5q5n4"]
[ext_resource type="PackedScene" uid="uid://dwiu4cm7rlq0p" path="res://src/HUD/HUD.tscn" id="3_p81om"]
[ext_resource type="Shader" path="res://src/Level/PostProcess.gdshader" id="4_5g3p6"]
[ext_resource type="Script" uid="uid://uvipfx8brsj0" path="res://src/UI/PostProcessOverlay.gd" id="4_c7nqk"]
[ext_resource type="Shader" path="res://src/Laser.gdshader" id="4_noe52"]
[ext_resource type="Texture2D" uid="uid://cdo8e7hc3mt7t" path="res://assets/sprites/mountain_1.png" id="4_r00bm"]
[ext_resource type="Script" uid="uid://bqub0n7gx4ukd" path="res://src/AudioBankPlayer.gd" id="7_1b0u6"]
[ext_resource type="AudioStream" uid="uid://curqsvlnprpo1" path="res://assets/sounds/timeout.wav" id="8_qpfp4"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_sbvk8"]
shader = ExtResource("4_noe52")
shader_parameter/laser_count = 1
shader_parameter/resolution = Vector2(256, 256)
shader_parameter/laser_points = PackedVector2Array(0, 0, 1, 0.5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
shader_parameter/laser_states = PackedFloat32Array(1, 0, 0, 0, 0, 0, 0, 0)
shader_parameter/laser_hue = 0.0
shader_parameter/intensity = 0.2
shader_parameter/beam_width = 0.71
shader_parameter/core_width = 0.17
shader_parameter/edge_softness = 0.15
shader_parameter/pulse_speed = 0.85
shader_parameter/pulse_amplitude = 0.12
shader_parameter/noise_scale = 17.0
shader_parameter/noise_speed = 4.67
shader_parameter/noise_intensity = 1.0
shader_parameter/energy_flow_speed = 8.0
shader_parameter/glow_radius = 1.55
shader_parameter/distortion_amount = 0.11
shader_parameter/distortion_freqs = Color(0.47058824, 0.14901961, 0.36078432, 0.64705884)
shader_parameter/flicker_speed = 8.0
shader_parameter/flicker_intensity = 0.2

[sub_resource type="ShaderMaterial" id="ShaderMaterial_post_process"]
shader = ExtResource("4_5g3p6")
shader_parameter/desaturate_amount = 0.0
shader_parameter/overlay_color = Vector3(0.95, 0.95, 1)
shader_parameter/overlay_amount = 0.0
shader_parameter/bloom_intensity = 1.0

[node name="Level" type="Node"]
script = ExtResource("1")

[node name="BG" type="Node2D" parent="."]

[node name="Parallax2D" type="Parallax2D" parent="BG"]
scroll_scale = Vector2(0.1, 0.1)
scroll_offset = Vector2(300, 0)

[node name="Sprite2D" type="Sprite2D" parent="BG/Parallax2D"]
texture_filter = 1
position = Vector2(0, 0.0511)
scale = Vector2(4, 4)
texture = ExtResource("2_clcnw")

[node name="Parallax2D2" type="Parallax2D" parent="BG"]
scroll_scale = Vector2(0.3, 0.2)
scroll_offset = Vector2(0, 700)

[node name="Sprite2D2" type="Sprite2D" parent="BG/Parallax2D2"]
texture_filter = 1
scale = Vector2(4, 4)
texture = ExtResource("3_5q5n4")

[node name="Parallax2D3" type="Parallax2D" parent="BG"]
scroll_scale = Vector2(0.5, 0.3)
scroll_offset = Vector2(0, 700)

[node name="Sprite2D3" type="Sprite2D" parent="BG/Parallax2D3"]
texture_filter = 1
scale = Vector2(4, 4)
texture = ExtResource("4_r00bm")

[node name="Map" parent="." instance=ExtResource("2")]

[node name="BaseEffects" type="CanvasLayer" parent="."]

[node name="LaserSurface" type="ColorRect" parent="BaseEffects" groups=["laser_surface"]]
unique_name_in_owner = true
material = SubResource("ShaderMaterial_sbvk8")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.35409713, 0.7342835, 0.4462875, 1)

[node name="PostProcessing" type="CanvasLayer" parent="."]

[node name="PostProcessOverlay" type="ColorRect" parent="PostProcessing"]
z_index = 100
material = SubResource("ShaderMaterial_post_process")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("4_c7nqk")

[node name="UI" type="CanvasLayer" parent="."]

[node name="HUD" parent="UI" instance=ExtResource("3_p81om")]

[node name="Fadeout" type="ColorRect" parent="UI"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(0, 0, 0, 0)

[node name="Timer" type="Timer" parent="."]
wait_time = 10.0
one_shot = true
autostart = true

[node name="SFX" type="Node" parent="."]

[node name="TimeoutSound" type="AudioStreamPlayer" parent="SFX"]
script = ExtResource("7_1b0u6")
sounds = Array[AudioStream]([ExtResource("8_qpfp4")])
metadata/_custom_type_script = "uid://bqub0n7gx4ukd"

[node name="MonthTimer" type="Timer" parent="."]
wait_time = 5.0
autostart = true

[connection signal="timeout" from="Timer" to="." method="_on_Timer_timeout"]
[connection signal="timeout" from="MonthTimer" to="." method="_on_month_timer_timeout"]
